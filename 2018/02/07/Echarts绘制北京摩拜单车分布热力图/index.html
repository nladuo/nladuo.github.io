<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><script src="http://tx.nladuo.cn:3000/analytics.js"></script><title>Echarts绘制北京摩拜单车分布热力图 · 叁公子的博客</title><meta name="description" content="Echarts绘制北京摩拜单车分布热力图 - 叁公子"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="../../../../avatar.jpg"><link rel="stylesheet" href="../../../../css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://nladuo.github.io/atom.xml" title="叁公子的博客"></head><body><div class="wrap"><header><a href="../../../../index.html" class="logo-link"><img src="../../../../avatar.jpg" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="../../../../index.html" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="../../../../archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/nladuo" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="http://nladuo.github.io/resume" target="_blank" class="nav-list-link">RESUME</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Echarts绘制北京摩拜单车分布热力图</h1><div class="post-info">Feb 7, 2018</div><div class="post-content"><h2 id="&#x722C;&#x866B;"><a href="#&#x722C;&#x866B;" class="headerlink" title="&#x722C;&#x866B;"></a>&#x722C;&#x866B;</h2><p>&#x6700;&#x8FD1;&#x5728;&#x722C;&#x4E00;&#x4E9B;&#x6570;&#x636E;&#xFF0C;&#x770B;&#x5230;&#x4E86;&#x77E5;&#x4E4E;&#x4E0A;&#x8FD9;&#x7BC7;<a href="https://zhuanlan.zhihu.com/p/31171275" target="_blank" rel="external">&#x722C;&#x866B;&#x722C;&#x53D6;&#x6469;&#x62DC;&#x5355;&#x8F66;&#x4F4D;&#x7F6E;&#x751F;&#x6210;&#x70ED;&#x529B;&#x56FE;</a>&#x6587;&#x7AE0;&#x8FD8;&#x633A;&#x6709;&#x610F;&#x601D;&#x3002;</p>
<p>&#x628A;&#x90A3;&#x7BC7;&#x6587;&#x7AE0;&#x7684;java&#x4EE3;&#x7801;&#x8F6C;&#x6210;python&#x5982;&#x4E0B;&#xFF0C;&#x901A;&#x8FC7;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;&#x5C31;&#x53EF;&#x4EE5;&#x6293;&#x53D6;&#x5230;&#x6307;&#x5B9A;&#x5730;&#x7406;&#x4F4D;&#x7F6E;&#x9644;&#x8FD1;&#x7684;&#x6469;&#x62DC;&#x5355;&#x8F66;&#x6570;&#x91CF;&#x3002;<br><a id="more"></a><br><figure class="highlight py"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</div><div class="line"><span class="keyword">import</span> requests</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">crawl_mobike</span><span class="params">(longitude, latitude)</span>:</span></div><div class="line">    headers = {</div><div class="line">        <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;application/x-www-form-urlencoded&quot;</span>,</div><div class="line">        <span class="string">&quot;mainSource&quot;</span>: <span class="string">&quot;4003&quot;</span>,</div><div class="line">        <span class="string">&quot;Accept&quot;</span>: <span class="string">&quot;*/*&quot;</span>,</div><div class="line">        <span class="string">&quot;eption&quot;</span>: <span class="string">&quot;4f906&quot;</span>,</div><div class="line">        <span class="string">&quot;opensrc&quot;</span>: <span class="string">&quot;list&quot;</span>,</div><div class="line">        <span class="string">&quot;wxcode&quot;</span>: <span class="string">&quot;xxx&quot;</span>,</div><div class="line">        <span class="string">&quot;platform&quot;</span>: <span class="string">&quot;3&quot;</span>,</div><div class="line">        <span class="string">&quot;Accept-Language&quot;</span>: <span class="string">&quot;zh-cn&quot;</span>,</div><div class="line">        <span class="string">&quot;citycode&quot;</span>: <span class="string">&quot;010&quot;</span>,</div><div class="line">        <span class="string">&quot;lang&quot;</span>: <span class="string">&quot;zh&quot;</span>,</div><div class="line">        <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (iPhone; CPU iPhone OS 11_1_1 like Mac OS X) &quot;</span></div><div class="line">                      <span class="string">&quot;AppleWebKit/604.3.5 (KHTML, like Gecko) Mobile/15B150 MicroMessenger/6.5.22 Net&quot;</span>,</div><div class="line">        <span class="string">&quot;Referer&quot;</span>: <span class="string">&quot;https&quot;</span>,</div><div class="line">        <span class="string">&quot;Accept-Encoding&quot;</span>: <span class="string">&quot;br, gzip, deflate&quot;</span>,</div><div class="line">        <span class="string">&quot;Connection&quot;</span>: <span class="string">&quot;keep-alive&quot;</span>,</div><div class="line">        <span class="string">&quot;Cache-Control&quot;</span>: <span class="string">&quot;no-cache&quot;</span>,</div><div class="line">    }</div><div class="line"></div><div class="line">    data = {</div><div class="line">        <span class="string">&quot;verticalAccuracy&quot;</span>: <span class="string">&quot;12&quot;</span>,</div><div class="line">        <span class="string">&quot;speed&quot;</span>: <span class="string">&quot;0.18000000715255737&quot;</span>,</div><div class="line">        <span class="string">&quot;longitude&quot;</span>: longitude,</div><div class="line">        <span class="string">&quot;horizontalAccuracy&quot;</span>: <span class="string">&quot;10&quot;</span>,</div><div class="line">        <span class="string">&quot;errMsg&quot;</span>: <span class="string">&quot;getLocation%3Aok&quot;</span>,</div><div class="line">        <span class="string">&quot;latitude&quot;</span>: latitude,</div><div class="line">        <span class="string">&quot;accuracy&quot;</span>: <span class="string">&quot;10&quot;</span>,</div><div class="line">        <span class="string">&quot;altitude&quot;</span>: <span class="string">&quot;48.6485595703125&quot;</span>,</div><div class="line">        <span class="string">&quot;citycode&quot;</span>: <span class="string">&quot;010&quot;</span>,</div><div class="line">        <span class="string">&quot;wxcode&quot;</span>: <span class="string">&quot;002111111&quot;</span>,</div><div class="line">    }</div><div class="line"></div><div class="line">    resp = requests.post(<span class="string">&quot;https://mwx.mobike.com/mobike-api/rent/nearbyBikesInfo.do&quot;</span>, headers=headers, data=data)</div><div class="line">    print(resp.content)</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</div><div class="line">    crawl_mobike(<span class="number">116.309337</span>, <span class="number">39.914972</span>)</div></pre></td></tr></table></figure></p>
<p>&#x6469;&#x62DC;&#x5355;&#x8F66;&#x8FD4;&#x56DE;&#x7684;&#x63A5;&#x53E3;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x5982;&#x4E0B;&#xFF1A;<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">	<span class="attr">&quot;code&quot;</span>: <span class="number">0</span>,</div><div class="line">	<span class="attr">&quot;message&quot;</span>: <span class="string">&quot;&quot;</span>,</div><div class="line">	<span class="attr">&quot;biketype&quot;</span>: <span class="number">0</span>,</div><div class="line">	<span class="attr">&quot;autoZoom&quot;</span>: <span class="literal">true</span>,</div><div class="line">	<span class="attr">&quot;radius&quot;</span>: <span class="number">150</span>,</div><div class="line">	<span class="attr">&quot;object&quot;</span>: [{</div><div class="line">		<span class="attr">&quot;distId&quot;</span>: <span class="string">&quot;0100225657&quot;</span>,</div><div class="line">		<span class="attr">&quot;distX&quot;</span>: <span class="number">116.30953432403221</span>,</div><div class="line">		<span class="attr">&quot;distY&quot;</span>: <span class="number">39.91498342943186</span>,</div><div class="line">		<span class="attr">&quot;distNum&quot;</span>: <span class="number">1</span>,</div><div class="line">		<span class="attr">&quot;distance&quot;</span>: <span class="string">&quot;16&quot;</span>,</div><div class="line">		<span class="attr">&quot;bikeIds&quot;</span>: <span class="string">&quot;0100225657#&quot;</span>,</div><div class="line">		<span class="attr">&quot;biketype&quot;</span>: <span class="number">1</span>,</div><div class="line">		<span class="attr">&quot;type&quot;</span>: <span class="number">0</span>,</div><div class="line">		<span class="attr">&quot;boundary&quot;</span>: <span class="literal">null</span></div><div class="line">	}, {</div><div class="line">		<span class="attr">&quot;distId&quot;</span>: <span class="string">&quot;0106193023&quot;</span>,</div><div class="line">		<span class="attr">&quot;distX&quot;</span>: <span class="number">116.30957439673547</span>,</div><div class="line">		<span class="attr">&quot;distY&quot;</span>: <span class="number">39.91493849505124</span>,</div><div class="line">		<span class="attr">&quot;distNum&quot;</span>: <span class="number">1</span>,</div><div class="line">		<span class="attr">&quot;distance&quot;</span>: <span class="string">&quot;20&quot;</span>,</div><div class="line">		<span class="attr">&quot;bikeIds&quot;</span>: <span class="string">&quot;0106193023#&quot;</span>,</div><div class="line">		<span class="attr">&quot;biketype&quot;</span>: <span class="number">2</span>,</div><div class="line">		<span class="attr">&quot;type&quot;</span>: <span class="number">0</span>,</div><div class="line">		<span class="attr">&quot;boundary&quot;</span>: <span class="literal">null</span></div><div class="line">	},</div><div class="line">  .....]</div><div class="line">}</div></pre></td></tr></table></figure></p>
<h2 id="&#x524D;&#x7AEF;"><a href="#&#x524D;&#x7AEF;" class="headerlink" title="&#x524D;&#x7AEF;"></a>&#x524D;&#x7AEF;</h2><p>&#x524D;&#x7AEF;&#x8FD9;&#x91CC;&#x9762;&#x6211;&#x4F7F;&#x7528;&#x4E86;Echarts&#x7684;&#x70ED;&#x529B;&#x56FE;&#xFF0C;&#x5B83;&#x63A5;&#x53D7;&#x7684;&#x53C2;&#x6570;&#x4E3A;&#x4E00;&#x4E2A;&#x5217;&#x8868;&#xFF0C;&#x8FD9;&#x91CC;&#x6BCF;&#x4E2A;&#x5217;&#x8868;&#x662F;&#x4E00;&#x4E2A;&#x4E09;&#x5143;&#x7EC4;&#xFF0C;&#x4EE3;&#x8868;&#x7ECF;&#x5EA6;&#x3001;&#x7EAC;&#x5EA6;&#x3001;&#x6743;&#x91CD;&#x3002;&#x8FD9;&#x91CC;&#x9762;&#x6BCF;&#x884C;&#x90FD;&#x4EE3;&#x8868;&#x4E00;&#x8F86;&#x6469;&#x62DC;&#x5355;&#x8F66;&#xFF0C;&#x6240;&#x4EE5;&#x6743;&#x91CD;&#x90FD;&#x662F;1.<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">	[<span class="number">116.110946655685</span>, <span class="number">39.71361160221894</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.10665613796685</span>, <span class="number">39.71794193318955</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.11279980490671</span>, <span class="number">39.719301801233826</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.10314985441794</span>, <span class="number">39.718549033584935</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.10511134689453</span>, <span class="number">39.7211004247298</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.10854372598347</span>, <span class="number">39.72385947622611</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.10677504048758</span>, <span class="number">39.725561916087905</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.10937042835597</span>, <span class="number">39.726014602442234</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.11245692428736</span>, <span class="number">39.725696746635926</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.11071132111596</span>, <span class="number">39.73308017919619</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.11544721233275</span>, <span class="number">39.72695473683173</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.1151990756164</span>, <span class="number">39.73172244352969</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.10526909433266</span>, <span class="number">39.735421221251826</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.11327451255882</span>, <span class="number">39.73611375346716</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.11641681190581</span>, <span class="number">39.731914898153754</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.10793126000574</span>, <span class="number">39.740616627234296</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.11814176701677</span>, <span class="number">39.731214903104224</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.10263000861319</span>, <span class="number">39.74186888903757</span>, <span class="number">1</span>],</div><div class="line">	[<span class="number">116.11948286049935</span>, <span class="number">39.73685980140814</span>, <span class="number">1</span>],</div><div class="line">	..........</div><div class="line">]</div></pre></td></tr></table></figure></p>
<p>&#x4EE3;&#x7801;&#x89C1;&#xFF1A;<a href="http://nladuo.github.io/beijing-heatmap/">http://nladuo.github.io/beijing-heatmap/</a></p>
<h2 id="&#x6548;&#x679C;"><a href="#&#x6548;&#x679C;" class="headerlink" title="&#x6548;&#x679C;"></a>&#x6548;&#x679C;</h2><p>&#x4E00;&#x5171;16&#x4E07;&#x5355;&#x8F66;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x663E;&#x793A;&#x8D77;&#x6765;&#x975E;&#x5E38;&#x5361;&#xFF0C;&#x771F;&#x6B63;&#x505A;&#x7684;&#x8BDD;&#x611F;&#x89C9;&#x8FD8;&#x8981;&#x805A;&#x7C7B;&#x4E00;&#x4E0B;&#x51CF;&#x5C11;&#x4E00;&#x4E0B;&#x70B9;&#x7684;&#x6570;&#x91CF;&#x3002;&#x8FD8;&#x6709;&#x5C31;&#x662F;&#x611F;&#x89C9;&#x5B9A;&#x4F4D;&#x4E0D;&#x662F;&#x90A3;&#x4E48;&#x51C6;&#x3002;<br><img src="/2018/02/07/Echarts&#x7ED8;&#x5236;&#x5317;&#x4EAC;&#x6469;&#x62DC;&#x5355;&#x8F66;&#x5206;&#x5E03;&#x70ED;&#x529B;&#x56FE;/effect1.png" alt=""></p>
<p><img src="/2018/02/07/Echarts&#x7ED8;&#x5236;&#x5317;&#x4EAC;&#x6469;&#x62DC;&#x5355;&#x8F66;&#x5206;&#x5E03;&#x70ED;&#x529B;&#x56FE;/effect2.png" alt=""></p>
</div></article></div></main><footer><div class="paginator"><a href="../../../01/05/使用ElasticSearch构建一个完整的搜索引擎/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'seansun';
var disqus_identifier = '2018/02/07/Echarts绘制北京摩拜单车分布热力图/';
var disqus_title = 'Echarts绘制北京摩拜单车分布热力图';
var disqus_url = 'http://nladuo.github.io/2018/02/07/Echarts绘制北京摩拜单车分布热力图/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//seansun.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2018 <a href="http://nladuo.github.io">叁公子</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>