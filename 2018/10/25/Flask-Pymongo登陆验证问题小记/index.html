<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><script src="http://tx.nladuo.cn:3000/analytics.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><title>Flask-Pymongo登陆验证问题小记 · 叁公子的博客</title><meta name="description" content="Flask-Pymongo登陆验证问题小记 - 叁公子KCN"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="../../../../avatar.jpg"><link rel="stylesheet" href="../../../../css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://nladuo.github.io/atom.xml" title="叁公子的博客"></head><body><div class="wrap"><header><a href="../../../../index.html" class="logo-link"><img src="../../../../avatar.jpg" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="../../../../index.html" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="../../../../archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/nladuo" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Flask-Pymongo登陆验证问题小记</h1><div class="post-info">Oct 25, 2018</div><div class="post-content"><h2 id="&#x524D;&#x8A00;"><a href="#&#x524D;&#x8A00;" class="headerlink" title="&#x524D;&#x8A00;"></a>&#x524D;&#x8A00;</h2><p>&#x524D;&#x51E0;&#x5929;&#x56E0;&#x4E3A;&#x4F7F;&#x7528;MongoDB&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x4E25;&#x683C;&#x7684;&#x767B;&#x9646;&#x7528;&#x6237;&#x540D;&#x5BC6;&#x7801;&#xFF0C;&#x53EA;&#x8BBE;&#x7F6E;&#x4E86;&#x56FA;&#x5B9A;IP&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x3002;&#x7ED3;&#x679C;&#x8FD8;&#x662F;&#x88AB;&#x626B;&#x63CF;&#x5230;&#x4E86;&#xFF0C;&#x7136;&#x540E;&#x6570;&#x636E;&#x5C31;&#x88AB;&#x9ED1;&#x4E86;&#xFF0C;&#x90FD;&#x4E22;&#x4E86;&#x3002;&#x7136;&#x540E;&#x9ED1;&#x5BA2;&#x8FD8;&#x8BA9;&#x6211;&#x7F34;&#x7EB3;0.6&#x4E2A;&#x6BD4;&#x7279;&#x5E01;&#x2026;&#x2026;</p>
<p><img src="/2018/10/25/Flask-Pymongo&#x767B;&#x9646;&#x9A8C;&#x8BC1;&#x95EE;&#x9898;&#x5C0F;&#x8BB0;/start.png" alt=""></p>
<p>&#x8FD8;&#x597D;&#x6570;&#x636E;&#x6709;&#x5907;&#x4EFD;&#xFF0C;&#x867D;&#x7136;&#x65F6;&#x95F4;&#x65E9;&#x4E86;&#x70B9;&#x513F;&#x3002;&#x3002;&#x3002;&#x54CE;&#x3002;&#x3002;&#x3002;&#x7ECF;&#x8FC7;&#x8FD9;&#x6B21;&#x4E8B;&#x4EF6;&#xFF0C;<strong><font color="red">&#x771F;&#x7684;&#xFF0C;&#x4EE5;&#x540E;&#x7528;MongoDB&#x771F;&#x7684;&#x8981;&#x517B;&#x6210;&#x8BBE;&#x7F6E;&#x5BC6;&#x7801;&#x7684;&#x4E60;&#x60EF;&#x554A;&#xFF01;&#xFF01;&#xFF01;</font></strong></p>
<h2 id="&#x7248;&#x672C;&#x4FE1;&#x606F;"><a href="#&#x7248;&#x672C;&#x4FE1;&#x606F;" class="headerlink" title="&#x7248;&#x672C;&#x4FE1;&#x606F;"></a>&#x7248;&#x672C;&#x4FE1;&#x606F;</h2><p><img src="/2018/10/25/Flask-Pymongo&#x767B;&#x9646;&#x9A8C;&#x8BC1;&#x95EE;&#x9898;&#x5C0F;&#x8BB0;/version.png" alt=""></p>
<h2 id="&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;"><a href="#&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;" class="headerlink" title="&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;"></a>&#x9047;&#x5230;&#x7684;&#x95EE;&#x9898;</h2><p>&#x7F51;&#x7AD9;&#x4F7F;&#x7528;Flask&#x5F00;&#x53D1;&#x7684;&#xFF0C;&#x4F7F;&#x7528;Python&#x7684;&#x65F6;&#x5019;&#x6211;&#x4E60;&#x60EF;&#x914D;&#x5957;MongoDB&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x3002;&#x6211;&#x9009;&#x62E9;&#x7684;&#x662F;<a href="http://www.pythondoc.com/flask-pymongo/" target="_blank" rel="external">Flask-Pymongo</a>&#x800C;&#x4E0D;&#x662F;<a href="https://flask-mongoengine.readthedocs.io/en/latest/" target="_blank" rel="external">Flask-MongoEngine</a>&#x3002;&#x56E0;&#x4E3A;&#x56E0;&#x4E3A;&#x6211;&#x5F00;&#x53D1;&#x7F51;&#x7AD9;&#x4E00;&#x822C;&#x90FD;&#x662F;&#x9009;&#x62E9;(&#x5176;&#x5B9E;&#x662F;&#x767E;&#x5206;&#x767E;)&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x524D;&#x7AEF;&#x7528;Vue&#xFF0C;&#x540E;&#x53F0;&#x63A5;&#x5565;&#x90FD;&#x884C;&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;Ajax&#x8C03;&#x7528;&#x3002;</p>
<p>&#x800C;Flask-MongoEngine&#x66F4;&#x50CF;&#x6A21;&#x677F;&#x6E32;&#x67D3;&#x7684;&#x65B9;&#x5F0F;&#x7684;&#xFF0C;&#x4E0D;&#x7B26;&#x5408;&#x6211;&#x7684;&#x8981;&#x6C42;&#xFF0C;&#x8FD8;&#x8981;&#x5B9A;&#x4E49;&#x5404;&#x79CD;Field&#xFF0C;&#x50CF;ORM&#x4E00;&#x6837;&#x3002;&#x6240;&#x4EE5;&#x76F8;&#x6BD4;&#x4E4B;&#x4E0B;&#xFF0C;&#x6211;&#x8FD8;&#x662F;&#x611F;&#x89C9;Flask-Pymongo&#x66F4;&#x7075;&#x6D3B;&#x4E00;&#x4E9B;&#x3002;<br><a id="more"></a></p>
<p>&#x5728;MongoDB&#x4E2D;&#xFF0C;&#x9996;&#x5148;&#x8981;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x7528;&#x6237;&#xFF0C;&#x7136;&#x540E;&#x8FD9;&#x4E2A;&#x7528;&#x6237;&#x662F;&#x5728;admin&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x521B;&#x5EFA;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x521B;&#x5EFA;&#x597D;&#x4E86;&#x4E4B;&#x540E;&#xFF0C;&#x8981;&#x5148;&#x201C;use admin&#x201D;&#xFF0C;&#x7136;&#x540E;&#x8FDB;&#x884C;auth&#xFF1A;&#x201C;db.auth(&#x201C;your_username&#x201D;, &#x201C;your_password&#x201D;)&#x201D;&#x3002;</p>
<p>&#x5728;pymongo&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x4E0B;&#x9762;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x5148;&#x4F7F;&#x7528;client.admin.authenticate&#x8FDB;&#x884C;&#x9A8C;&#x8BC1;&#xFF0C;&#x8FD9;&#x4E2A;&#x6B65;&#x9AA4;&#x662F;&#x5728;admin&#x6570;&#x636E;&#x5E93;&#x8FDB;&#x884C;&#x7684;&#xFF0C;&#x7136;&#x540E;&#x518D;&#x8FDE;&#x63A5;&#x5230;&#x522B;&#x7684;&#x6570;&#x636E;&#x5E93;your_db&#x3002;<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">client = pymongo.MongoClient()</div><div class="line">client.admin.authenticate(<span class="string">&quot;your_username&quot;</span>, <span class="string">&quot;your_password&quot;</span>)</div><div class="line">db = client.your_db</div><div class="line">coll = db.some_collection</div></pre></td></tr></table></figure></p>
<p>&#x7136;&#x800C;&#x5728;Flask-Pymongo&#x5C01;&#x88C5;&#x540E;&#xFF0C;&#x6587;&#x6863;&#x8BF4;&#x660E;&#x5982;&#x4E0B;&#xFF1A;<br><img src="/2018/10/25/Flask-Pymongo&#x767B;&#x9646;&#x9A8C;&#x8BC1;&#x95EE;&#x9898;&#x5C0F;&#x8BB0;/doc.png" alt=""></p>
<p>&#x5176;&#x4E2D;&#x6CA1;&#x6709;&#x53D1;&#x73B0;&#x6709;&#x7528;&#x4E8E;&#x9A8C;&#x8BC1;&#x7684;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x7136;&#x540E;&#x6211;&#x8FDB;&#x884C;&#x4E86;&#x5982;&#x4E0B;&#x7684;&#x914D;&#x7F6E;&#xFF1A;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">app = Flask(__name__)</div><div class="line">app.config[&apos;MONGO_DBNAME&apos;] = &quot;your_db&quot;</div><div class="line">app.config[&apos;MONGO_HOST&apos;] = &quot;localhost&quot;</div><div class="line">app.config[&apos;MONGO_PORT&apos;] = &quot;27017&quot;</div><div class="line">app.config[&apos;MONGO_USERNAME&apos;] = &quot;your_username&quot;</div><div class="line">app.config[&apos;MONGO_PASSWORD&apos;] = &quot;your_password&quot;</div><div class="line"></div><div class="line">mongo = PyMongo(app)</div></pre></td></tr></table></figure></p>
<p>&#x800C;&#x540E;&#x51FA;&#x73B0;&#x4E86;&#x201C;pymongo.errors.OperationFailure: auth failed&#x201D;&#x7684;&#x9519;&#x8BEF;<br><img src="/2018/10/25/Flask-Pymongo&#x767B;&#x9646;&#x9A8C;&#x8BC1;&#x95EE;&#x9898;&#x5C0F;&#x8BB0;/error.png" alt=""><br>&#x7136;&#x540E;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#xFF0C;&#x6211;&#x628A;MONGO_DBNAME&#x6539;&#x4E3A;admin&#x3002;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">app.config[&apos;MONGO_DBNAME&apos;] = &quot;admin&quot;</div></pre></td></tr></table></figure></p>
<p>&#x53D1;&#x73B0;auth&#x901A;&#x8FC7;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x6CA1;&#x6570;&#x636E;&#x4E86;&#x3002;&#x56E0;&#x4E3A;&#x8FDE;&#x63A5;&#x7684;&#x662F;admin&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x800C;&#x4E0D;&#x662F;your_db&#x3002;</p>
<h2 id="&#x6E90;&#x7801;&#x5206;&#x6790;"><a href="#&#x6E90;&#x7801;&#x5206;&#x6790;" class="headerlink" title="&#x6E90;&#x7801;&#x5206;&#x6790;"></a>&#x6E90;&#x7801;&#x5206;&#x6790;</h2><p>&#x8FD9;&#x91CC;&#x4E3A;&#x4E86;&#x4E00;&#x63A2;&#x7A76;&#x7ADF;&#xFF0C;&#x4F7F;&#x7528;&#x4E86;PyCharm&#x7684;&#x81EA;&#x52A8;&#x8DF3;&#x8F6C;&#x529F;&#x80FD;&#x67E5;&#x770B;&#x4E00;&#x4E0B;Flask-Pymongo&#x914D;&#x7F6E;&#x90E8;&#x5206;&#x7684;&#x6E90;&#x7801;&#x3002;&#x521D;&#x59CB;&#x5316;&#x90E8;&#x5206;&#x5728;init_app&#x65B9;&#x6CD5;&#x4E2D;&#x3002;<br><img src="/2018/10/25/Flask-Pymongo&#x767B;&#x9646;&#x9A8C;&#x8BC1;&#x95EE;&#x9898;&#x5C0F;&#x8BB0;/analysis1.png" alt=""><br>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FD9;&#x91CC;&#x9762;&#x6700;&#x5F00;&#x59CB;&#x7528;&#x4E8E;&#x9A8C;&#x8BC1;&#x7684;&#x6570;&#x636E;&#x5E93;&#x5C31;&#x662F;admin&#xFF0C;&#x7136;&#x540E;&#x8FD9;&#x91CC;&#x7684;if&#x6761;&#x4EF6;&#x4E0D;&#x6210;&#x7ACB;&#xFF0C;&#x770B;&#x4E0B;else&#x662F;&#x4EC0;&#x4E48;&#x6837;&#x5B50;&#x7684;&#x3002;</p>
<p><img src="/2018/10/25/Flask-Pymongo&#x767B;&#x9646;&#x9A8C;&#x8BC1;&#x95EE;&#x9898;&#x5C0F;&#x8BB0;/analysis2.png" alt=""><br>&#x8FD9;&#x91CC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x914D;&#x7F6E;&#x4E86;MONGO_DBNAME&#xFF0C;&#x8FD9;&#x91CC;&#x5C31;&#x4F1A;&#x6539;&#x53D8;auth_database&#x3002;</p>
<p><img src="/2018/10/25/Flask-Pymongo&#x767B;&#x9646;&#x9A8C;&#x8BC1;&#x95EE;&#x9898;&#x5C0F;&#x8BB0;/analysis3.png" alt=""><br>&#x518D;&#x5F80;&#x4E0B;&#x770B;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x8FD9;&#x91CC;MONGO_DBNAME&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8BBE;&#x7F6E;&#x7684;&#x8BDD;&#xFF0C;&#x5C31;&#x4F1A;&#x88AB;&#x8BBE;&#x7F6E;&#x6210;app.name&#x3002;&#x5F53;&#x7136;&#x5982;&#x679C;&#x6211;&#x4EEC;&#x8BBE;&#x7F6E;&#x4E86;MONGO_DBNAME&#xFF0C;&#x7528;&#x4E8E;&#x9A8C;&#x8BC1;&#x548C;&#x8FDE;&#x63A5;&#x7684;&#x6570;&#x636E;&#x5E93;&#x90FD;&#x4F1A;&#x53D8;&#x6210;MONGO_DBNAME&#x3002;</p>
<p>&#x6240;&#x4EE5;&#x7ECF;&#x8FC7;&#x5206;&#x6790;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4E0D;&#x4F7F;&#x7528;MONGO_DBNAME&#xFF0C;&#x7136;&#x540E;&#x8BA9;DBNAME&#x901A;&#x8FC7;app.name&#x6765;&#x8FDB;&#x884C;&#x8BBE;&#x7F6E;&#x3002;</p>
<h2 id="&#x89E3;&#x51B3;&#x65B9;&#x6CD5;"><a href="#&#x89E3;&#x51B3;&#x65B9;&#x6CD5;" class="headerlink" title="&#x89E3;&#x51B3;&#x65B9;&#x6CD5;"></a>&#x89E3;&#x51B3;&#x65B9;&#x6CD5;</h2><p>&#x6700;&#x540E;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x5982;&#x4E0B;&#xFF1A;<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">app = Flask(__name__)</div><div class="line">app.name = <span class="string">&quot;your_db&quot;</span></div><div class="line"><span class="comment"># app.config[&apos;MONGO_DBNAME&apos;] = &quot;your_db&quot;   &#x4E0D;&#x8981;&#x8FD9;&#x884C;&#x4E86;</span></div><div class="line">app.config[<span class="string">&apos;MONGO_HOST&apos;</span>] = <span class="string">&quot;localhost&quot;</span></div><div class="line">app.config[<span class="string">&apos;MONGO_PORT&apos;</span>] = <span class="string">&quot;27017&quot;</span></div><div class="line">app.config[<span class="string">&apos;MONGO_USERNAME&apos;</span>] = <span class="string">&quot;your_username&quot;</span></div><div class="line">app.config[<span class="string">&apos;MONGO_PASSWORD&apos;</span>] = <span class="string">&quot;your_password&quot;</span></div><div class="line"></div><div class="line">mongo = PyMongo(app)</div></pre></td></tr></table></figure></p>
<h2 id="&#x603B;&#x7ED3;"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</h2><p>&#x6709;&#x7684;&#x65F6;&#x5019;&#x770B;&#x770B;&#x6E90;&#x7801;&#x8FD8;&#x662F;&#x86EE;&#x6709;&#x7528;&#x7684;&#xFF0C;&#x6846;&#x67B6;&#x7684;&#x6E90;&#x7801;&#x4E0D;&#x4E00;&#x5B9A;&#x5C31;&#x5F88;&#x590D;&#x6742;&#x3002;</p>
</div></article></div></main><footer><div class="paginator"><a href="../../../11/04/PyAndroidControl-使用python脚本控制你的安卓设备/" class="prev">PREV</a><a href="../../20/读论文Multi-digit-Number-Recognition-from-Street-View-Imagery-using-Deep-Convolutional-Neural-Networks/" class="next">NEXT</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'seansun';
var disqus_identifier = '2018/10/25/Flask-Pymongo登陆验证问题小记/';
var disqus_title = 'Flask-Pymongo登陆验证问题小记';
var disqus_url = 'http://nladuo.github.io/2018/10/25/Flask-Pymongo登陆验证问题小记/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//seansun.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2020 <a href="http://nladuo.github.io">叁公子KCN</a>, <a href="http://www.beian.miit.gov.xn--cn%28-mn4fwr178g7c7a/">京ICP备17062395号</a></p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>